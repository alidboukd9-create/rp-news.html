<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>RP News</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { margin:0; font-family:Arial; background:#0b0f1a; color:white; }
header { background:#11162a; padding:10px; display:flex; gap:8px; flex-wrap:wrap; }
button { background:#1c2450; color:white; border:none; padding:8px 14px; border-radius:6px; }
section { display:none; padding:15px; }
section.active { display:block; }
input, textarea, select {
  width:100%; padding:8px; margin:6px 0; border-radius:6px; border:none;
}
.news { background:#141a35; padding:12px; border-radius:8px; margin-bottom:10px; }
.small { font-size:12px; opacity:.7; }
</style>
</head>

<body>

<header>
  <button onclick="show('news')">News</button>
  <button onclick="show('post')">Post News</button>
  <button onclick="show('login')">Login</button>
</header>

<section id="news" class="active">
  <h2>Latest News</h2>
  <div id="newsList"></div>
</section>

<section id="post">
  <h2>Post News</h2>
  <div id="blocked">Login required.</div>
  <div id="postForm" style="display:none">
    <input id="title" placeholder="Title">
    <textarea id="body" placeholder="News text"></textarea>
    <select id="tag">
      <option>Breaking</option>
      <option>War</option>
      <option>Diplomacy</option>
      <option>Economy</option>
      <option>Other</option>
    </select>
    <button onclick="publish()">Publish</button>
  </div>
</section>

<section id="login">
  <h2>Login</h2>
  <input id="user" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <div class="small" id="msg"></div>
</section>

<script>
const USERS = {
  "Aloushi":"AloushiOk",
  "Hamoudi haidar":"9928",
  "Rayano":"XYBIUY",
  "Hamoudi 2 (hteit)":"xiwps68",
  "Aloushi fares":"9usidjOheU"
};

let currentUser = null;
let news = JSON.parse(localStorage.getItem("rp_news") || "[]");

function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function save(){
  localStorage.setItem("rp_news", JSON.stringify(news));
}

function render(){
  const box = document.getElementById("newsList");
  box.innerHTML="";
  if(news.length===0){ box.innerHTML="No news yet."; return; }
  news.forEach(n=>{
    box.innerHTML += `
      <div class="news">
        <b>${n.title}</b> (${n.tag})<br>
        ${n.body}
        <div class="small">${n.author} â€¢ ${n.time}</div>
      </div>`;
  });
}

function login(){
  if(USERS[user.value]===pass.value){
    currentUser=user.value;
    msg.innerText="Logged in";
    blocked.style.display="none";
    postForm.style.display="block";
    show("news");
  } else {
    msg.innerText="Wrong login";
  }
}

function publish(){
  if(!title.value || !body.value) return;
  news.unshift({
    title:title.value,
    body:body.value,
    tag:tag.value,
    author:currentUser,
    time:new Date().toLocaleString()
  });
  save();
  render();
  title.value=""; body.value="";
  show("news");
}

render();
</script>

</body>
</html>
