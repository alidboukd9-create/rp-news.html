<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RP System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0b0f1a;
  --card:#141a35;
  --header:#12183a;
  --accent:#3b5bff;
  --text:#ffffff;
  --muted:#aab0d6;
}

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* HEADER */
header {
  background: var(--header);
  padding: 12px 14px;
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  box-shadow: 0 4px 20px rgba(0,0,0,.3);
}

header .title {
  font-weight: bold;
  font-size: 18px;
  margin-right: 10px;
  white-space: nowrap;
}

/* BUTTONS */
button {
  background: linear-gradient(135deg,#3b5bff,#6f7cff);
  color: white;
  border: none;
  padding: 8px 14px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}
button:hover { opacity: 0.9; }

/* SECTIONS */
section {
  display: none;
  padding: 16px;
}
section.active { display: block; }

/* INPUTS */
input, textarea, select {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
  border-radius: 8px;
  border: none;
  background: #0f1533;
  color: white;
}

/* CARDS */
.card {
  background: var(--card);
  padding: 14px;
  border-radius: 12px;
  margin-bottom: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,.35);
}

/* NEWS */
.news {
  background: linear-gradient(180deg,#141a35,#10162e);
  padding: 14px;
  border-radius: 12px;
  margin-bottom: 12px;
  border-left: 4px solid var(--accent);
}

.news-title {
  font-weight: bold;
  font-size: 16px;
}

.tag {
  font-size: 12px;
  background: #2a356b;
  padding: 2px 8px;
  border-radius: 999px;
  margin-left: 6px;
}

.small {
  font-size: 12px;
  color: var(--muted);
  margin-top: 6px;
}
</style>
</head>

<body>

<header>
  <div class="title">üåç RP System</div>
  <button onclick="show('news')">News</button>
  <button onclick="show('post')">Post News</button>
  <button onclick="show('flag')">Change Flag</button>
  <button onclick="show('login')">Login</button>
</header>

<section id="news" class="active">
  <h2>Latest News</h2>
  <div id="newsList"></div>
</section>

<section id="post">
  <h2>Post News</h2>
  <div id="postBlocked" class="card">Login required.</div>
  <div id="postForm" class="card" style="display:none">
    <input id="postTitle" placeholder="Title">
    <textarea id="postBody" placeholder="Write the news..."></textarea>
    <select id="postTag">
      <option>Breaking</option>
      <option>War</option>
      <option>Diplomacy</option>
      <option>Economy</option>
      <option>Other</option>
    </select>
    <button onclick="publish()">Publish</button>
  </div>
</section>

<section id="flag">
  <h2>Change Flag</h2>
  <div id="flagBlocked" class="card">Login required.</div>
  <div id="flagForm" class="card" style="display:none">
    <input id="myCountry" placeholder="Country (e.g. RR)">
    <input id="myFlag" placeholder="Flag emoji (üá±üáß)">
    <button onclick="saveFlag()">Save</button>
    <div class="small" id="flagMsg"></div>
  </div>
</section>

<section id="login">
  <h2>Login</h2>
  <div class="card">
    <input id="loginUser" placeholder="Username">
    <input id="loginPass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <div class="small" id="loginMsg"></div>
  </div>
</section>

<script>
/* USERS */
const USERS = {
  "Aloushi":"AloushiOk",
  "Hamoudi haidar":"9928",
  "Rayano":"XYBIUY",
  "Hamoudi 2 (hteit)":"xiwps68",
  "Aloushi fares":"9usidjOheU"
};

const DEFAULTS = {
  "Aloushi": { country:"RR", flag:"üè≥" },
  "Hamoudi haidar": { country:"UWK", flag:"üè≥" },
  "Rayano": { country:"WL", flag:"üè≥" },
  "Hamoudi 2 (hteit)": { country:"F.E", flag:"üè≥" },
  "Aloushi fares": { country:"", flag:"üè≥" }
};

let currentUser = null;
let profiles = JSON.parse(localStorage.getItem("rp_profiles") || "{}");
let news = JSON.parse(localStorage.getItem("rp_news") || "[]");

function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function save(){
  localStorage.setItem("rp_news", JSON.stringify(news));
  localStorage.setItem("rp_profiles", JSON.stringify(profiles));
}

function render(){
  const box = document.getElementById("newsList");
  box.innerHTML = "";
  if(news.length === 0){
    box.innerHTML = "No news yet.";
    return;
  }
  news.forEach(n=>{
    box.innerHTML += `
      <div class="news">
        <div class="news-title">${n.flag} ${n.title}
          <span class="tag">${n.tag}</span>
        </div>
        <div>${n.body}</div>
        <div class="small">${n.country} ‚Ä¢ ${n.author} ‚Ä¢ ${n.time}</div>
      </div>`;
  });
}

function login(){
  const u = loginUser.value.trim();
  const p = loginPass.value.trim();

  if(USERS[u] !== p){
    loginMsg.innerText = "Wrong username or password";
    return;
  }

  currentUser = u;
  loginMsg.innerText = "Logged in";

  if(!profiles[u]){
    profiles[u] = DEFAULTS[u] || { country:"", flag:"üè≥" };
    save();
  }

  postBlocked.style.display = "none";
  postForm.style.display = "block";
  flagBlocked.style.display = "none";
  flagForm.style.display = "block";

  myCountry.value = profiles[u].country;
  myFlag.value = profiles[u].flag;

  show("news");
}

function publish(){
  if(!currentUser) return;

  const title = postTitle.value.trim();
  const body = postBody.value.trim();
  const tag = postTag.value;

  if(!title || !body){
    alert("Fill everything");
    return;
  }

  const prof = profiles[currentUser];
  if(!prof.country){
    alert("Set your country first");
    show("flag");
    return;
  }

  news.unshift({
    title,
    body,
    tag,
    author: currentUser,
    country: prof.country,
    flag: prof.flag,
    time: new Date().toLocaleString()
  });

  save();
  postTitle.value = "";
  postBody.value = "";
  render();
  show("news");
}

function saveFlag(){
  if(!currentUser) return;

  profiles[currentUser].country = myCountry.value.trim();
  profiles[currentUser].flag = myFlag.value.trim() || "üè≥";
  save();
  flagMsg.innerText = "Saved!";
}

render();
</script>

</body>
</html>
